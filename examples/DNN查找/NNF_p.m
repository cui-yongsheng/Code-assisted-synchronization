function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 13-Aug-2023 10:45:26.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx8 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.841390926769257;-298.742189739349;-3119173.45336956;-314.826455782431;0.793117062828897;-289.793072561542;-2992385.15740028;-310.175534592436];
x1_step1.gain = [3.18844888436908;0.00330103261491783;3.13472398405095e-07;0.00641571908329818;2.93242890919636;0.00343275449143263;3.24846926729885e-07;0.00897814447323151];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.1697580381435233043;-1.1160388264112515166;-1.4877253338388956028;-1.2384761047531351874;1.2837977050188640327;-0.87076226061115025168;0.41095823988420948636;1.2264159471450502004;0.35543816578595038846;-1.1187040337095350839;0.43956173286038224823;-1.2792133187694696428;-1.2038932185135688968;1.1760185154226050486;-1.0931661839714514883;0.075745467791865320195;-1.0899100097916436525;2.4210018253781160347;0.87421352313710676274;-2.0220139293900962763];
IW1_1 = [0.72846632030062330454 0.56922775682814152898 0.18781723995119986581 1.2990429767510958126 0.10675641817977211956 1.6540302358640652791 1.3453808297167628716 -0.89354548141879619472;-0.49253923678435579392 1.3440521290132241283 -0.10628392327614374913 -0.31049741510005712808 -0.37946699131206290678 -0.90316638820112293828 0.1078845814072127568 -0.26025442319487668286;-0.42618874330989725552 1.929348014308328807 -0.535777350141659503 -0.32209064562031092249 -0.63833882774094885537 -0.26576541041709672575 -0.48020703975841305677 -0.23267983734455363609;-0.39607379306595291713 2.7871334887901682009 0.4474908317454074913 0.32282892786288769349 -0.82281631446224312576 -0.17241303186421846894 0.73018141186244323038 -0.26336981291544114825;1.4166093521628015939 -1.7782776573560876709 0.56801576617654581103 -0.59802516744509970348 -0.72177529295797360209 -0.39112014148449686379 0.053559083678931806993 0.4150255987799930657;-1.1601583930310865878 2.1302532824349631468 0.82703000196510301212 0.3752310484888435882 -0.91358974482014843055 -0.46218657863235240724 0.67930636703765734374 -0.49154743762362024251;-1.167854268630180492 -7.0865856460693947838 7.5334478075160884458 -0.41816417215153961484 1.0062672262561345171 -0.37593341001640784294 0.061583972494243674478 -0.13749522674140954304;1.7944591834408734066 -1.3927449947669716668 0.22441004431700764532 -0.27084656791875016957 1.1882865344195361335 2.0154245559884498284 -1.9562969703716019954 0.67913717806923246112;-0.47065332007978111228 -1.188036377400821797 1.1195952628868766077 0.45178931357553209214 0.74241269415697774825 3.074722968984739957 -3.1867483083264844801 -0.18633671934471765508;-1.1158589151516138394 5.7173841948650085953 -4.4549385285107740984 -0.662285083096520788 0.71419159154372280351 1.5921054633651186005 -0.80588122415342744453 0.32506326728736950615;0.52986127241658786957 0.93915231533637055783 -1.1717885532063738729 0.9877859421635079018 0.70850952068971906339 -0.31941443851761669448 -0.092970159275631902851 0.12693058239540708221;-2.1536114908640655585 1.2932259191312696078 -0.0027192459387585785936 0.30047119291558888055 -1.275033608451696665 -2.3820997424670999898 2.2461510528735120218 -0.81595407735485225853;-1.8484677293304379031 11.59269175660852369 -11.398581590798194441 0.58616757253732265642 -1.4074825677832472071 -0.55814031452598511507 -0.53398017995322766271 -0.54768834736129623497;1.5300920422135857457 -1.3247861130856508627 0.20302973772277135844 -0.5896500951116765421 -0.69596771948982250056 -0.61910270983848914028 0.31140320972913448916 0.39614297998410646917;-0.67237728527378914922 2.5047489952820596315 0.60956229589841270933 0.35542434315560711422 -0.86662522616718840052 -0.25012573442733515572 0.66892407307519130555 -0.34700222948046233196;-0.4387050612412479178 -0.26839583141971012914 0.31996226672889738207 0.13156230483101513662 0.73597977246851775668 3.028945050699813013 -2.8874704025847095501 -0.1089881727210240403;-1.9369146752233092901 -7.4673723407933163543 7.1718401852778921324 0.82402346219167865726 -0.40489528611028147154 1.9236476277309391136 -1.8388958447950558561 -0.70788530280537909078;2.4165156619760890244 -0.13775399174607694253 1.6913242576290019592 -0.25603909791607964985 -0.75229669490029726919 0.52731395298623118251 -0.13506629021479651942 0.16229536074028963477;2.3294160189129007321 7.3246553569674448525 -7.3046861568628980166 -0.32505470797269114813 0.38003030854511549164 0.57628476755142721277 -0.47103967474454450093 0.55619582875148176893;-2.1066596482972896887 1.4167767478157708982 -2.3818774938667961472 0.23243004482048879034 0.62107287163660396256 -0.77474064010352727827 0.26858409498437596508 -0.20982076505520361187];

% Layer 2
b2 = -0.11208068909367752131;
LW2_1 = [0.095169197479378894733 3.3919999273950591778 -3.1552567783319389605 -4.3241110018550745764 2.9661143949987351931 -2.929004960044415018 -0.2567048385187910009 -2.4839432608361149413 -1.001378429187946395 0.25819491172659819744 0.34941958766460456953 -2.0193348801821535687 0.13144414705723383996 -2.6960482281830122631 7.1702807905871486227 1.1102202123841520276 0.3453889914263449934 -1.9378790699172927514 0.41218907646391378385 -2.5521153820217441499];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.033333669337444;
y1_step1.xoffset = -29.9997799399166;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
